<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    <meta name="description" content="ios-driver : IOS native app automation"/>
    <link href="stylesheets/prettify.css" type="text/css" rel="stylesheet"/>
    <script type="text/javascript" src="javascripts/prettify.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/properties.js"></script>

    <title>ios-driver</title>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38099992-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    <script type="text/javascript">
        $(document).ready(function($){
            var nav = $('.nav-container');

            $(window).scroll(function () {
                if ($(this).scrollTop() > 170) {
                    nav.addClass("f-nav");
                } else {
                    nav.removeClass("f-nav");
                }
            });

            buildMenu("setup");
        });
    </script>

</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="DEFAULT">View on GitHub</a>
        <a id="download_me" href="DEFAULT">DEFAULT</a>

        <h1 id="project_title">ios-driver</h1>

        <h2 id="project_tagline">IOS automation for native, hybrid and mobile web.</h2>

        <div id="menu"/>


    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">

    <div class="nav-container">
        <div class = "nav">
            <ul >
                <li><a href="#overview">Technical Overview</a></li>
                <li><a href="#sysreqs">System Requirements</a></li>
                <li><a href="#testapp">Getting a test application</a></li>
                <li><a href="#launching">Launching ios-driver</a></li>
                <li><a href="#cli">Command Line Parameters</a></li>
                <li><a href="#real">Real Devices</a></li>
            </ul>
        </div>
    </div>


 <h3 id="overview">Technical overview</h3>
        Webdriver is a great automation tool for browsers. It comes with a very clean API that describes
        how
        users can interact with a browser. The same API can be used for ios automation as well. In the
        end,
        whatever you test, as long as the user interacts with a GUI, it's always "find something" and then 
        "interact
        with it".
        Using that API for ios automation has 2 main advantages :
        - it's a proven, stable API that is about to become a W3C standard
        - it decouples the remote implementation from the local client. Selenium already comes with
        Java,
        C#, Python, Ruby clients. You can reuse whichever one your confortable and focus on the
        business
        logic of your tests instead of having to learn a new API.

        <h3 id="sysreqs">System requirements for OSX</h3>

        <p>ios-driver is built upon 2 different frameworks from Apple. </p>

        <p>For <b>native apps</b>, it uses the UIAutomation framework from Apple.<a
                href="http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html">doc</a>You
            need xcode with an IOS SDK &gt; 5.0.
            To check :</p>

<pre><code>$ xcodebuild -showsdks
</code></pre>

        <p>it should return something like :</p>

<pre><code>Mac OS X SDKs:
    Mac OS X 10.6 -sdk macosx10.6
    Mac OS X 10.7 -sdk macosx10.7

    iOS SDKs:
    iOS 5.1 -sdk iphoneos5.1

    iOS Simulator SDKs:
    Simulator - iOS 4.3 -sdk iphonesimulator4.3
    Simulator - iOS 5.0 -sdk iphonesimulator5.0
    Simulator - iOS 5.1 -sdk iphonesimulator5.1
    Simulator - iOS 6.0 -sdk iphonesimulator6.0
    Simulator - iOS 6.1 -sdk iphonesimulator6.1
</code></pre>

        <p>If you have iOS 5.0 or above in the Simulator SDKs, the UIAutomation part of
            ios-driver will
            work.</p>

        <p>For mobile web, or UIWebviews in hybrid apps ( beta ), it uses the remote webkit
            debug protocol. That requires ios 6+ and safari6+. If you don't have that, the native
            part of ios
            driver will still work, but you won't be able to test mobile web pages on safari, or to
            interact
            with UIWebviews using dom selectors.</p>

        <p>The server is written in Java.</p>

<pre><code>$ java -version
</code></pre>

        <p>will return the version you're currently running, or prompt you to install it.</p>

<h3 id="testapp">Getting a test application</h3>

<p>( for the doc example, I'll use the apple app <a
        href="http://developer.apple.com/library/ios/#samplecode/InternationalMountains/Introduction/Intro.html">InternationalMountains</a>
    You need to attach an app that will work with UIAutomation.
    You can use xcodebuild command line ( from you CI for instance ) or use the xcode UI.
</p>

<p>With the UI :
    from the menu bar, Product &gt; Profile</p>

<p>Select Automation. That will build the app and start Instruments. You can close
    Instruments.
    From xcode, select Organizer &gt; Projects
    You will have the application in the folder mentioned in Derived data.
    It will be a folder that looks like :
    ~/Library/Developer/Xcode/DerivedData/InternationalMountains-cjnsqcubuvgivjgopgboswocznce/</p>

<p>from there navigate to /Build/Products/Debug-iphonesimulator
    and take you application. ( YourAppName.app )</p>

<p>Save it in a more convenient path, for instance ~/Documents/build/myapp.app</p>

<h3 id="launching">Launching ios-driver</h3>

<p>Download server-standalone-1.0.0-SNAPSHOT.jar</p>

<p>Before the first run you will need to update the MobileSafari Info.plist to allow ios-driver to edit it</p>
    <pre  class="prettyprint">
        sudo chmod 666 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator*.sdk/Applications/MobileSafari.app/Info.plist
    </pre>

<p>cd to the folder where you downloaded the jar, and run </p>

<pre><code>$ java -jar ios-server-0.5.0.jar -aut ~/Documents/build/myapp.app -port
    4444
</code></pre>

        <p>You should see in the following log of the terminal :</p>

<pre>

43:49:493 INFO IOSServer.init
server status: http://0.0.0.0:4444/inspector/
tests can access the server at http://0.0.0.0:4444/wd/hub
server status: http://0.0.0.0:4444/wd/hub/status
using xcode install : /Applications/Xcode46-DP2.app
using IOS version 6.1
ios >= 6.0. Safari and hybrid apps are supported.

Applications :
---------------
	CFBundleName=Geocoder,CFBundleVersion=1.2
	CFBundleName=InternationalMountains,CFBundleVersion=1.1
	CFBundleName=Safari,CFBundleVersion=8536.25
	CFBundleName=UICatalog,CFBundleVersion=2.10
	CFBundleName=UICatalog,CFBundleVersion=2.10
	CFBundleName=Safari,CFBundleVersion=8536.25

2013-01-29 20:43:49.506:INFO::jetty-7.2.0.v20101020
2013-01-29 20:43:49.568:INFO::Started SelectChannelConnector@0.0.0.0:4444
</pre>

        <p>check that the application is recognized by opening a browser and navigating to :
            http://localhost:4444/wd/hub/status</p>

        <p>You should see a json object with all the info about the app.</p>




<pre><code>


{
    "class": "org.openqa.selenium.remote.Response",
    "hCode": 228832089,
    "sessionId": "3dcc2e66-ebf8-4e96-8579-82f06c6b2b61",
    "status": 0,
    "value": {
        "build": {
            "revision": "b0e9250cafe9870fc3b0a0224cb6e8d242aa1374",
            "time": "20130129-1201",
            "version": "0.5.0-SNAPSHOT"
        },
    "ios": {"simulatorVersion": "6.1"},
    "java": {"version": "1.6.0_37"},
    "os": {
        "arch": "x86_64",
        "name": "Mac OS X",
        "version": "10.8.1"
    },
    "supportedApps": [
    {
    "CFBundleDevelopmentRegion": "en",
    "CFBundleExecutable": "InternationalMountains",
    "CFBundleIconFile": "Icon.png",
    "CFBundleIdentifier": "com.yourcompany.InternationalMountains",
    "CFBundleInfoDictionaryVersion": "6.0",
    "CFBundleName": "InternationalMountains",
    "CFBundlePackageType": "APPL",
    "CFBundleSignature": "????",
    "CFBundleSupportedPlatforms": ["iPhoneSimulator"],
    "CFBundleVersion": "1.1",
    "DTPlatformName": "iphonesimulator",
    "DTSDKName": "iphonesimulator5.1",
    "LSRequiresIPhoneOS": true,
    "NSMainNibFile": "MainWindow",
    "UIDeviceFamily": [1],
    "applicationPath": "/Users/freynaud/build/InternationalMountains.app",
    "resources": {"CFBundleIconFile": "/wd/hub/resources/hash=-674408620"},
    "sdkVersion": "6.1",
    "simulator": true,
    "supportedDevices": ["iphone"],
    "supportedLanguages": [
        "zh",
        "fr",
        "en"
    ],
}


</code></pre>

<h3 id="cli">Command line parameters</h3>

<h4>-beta</h4>
<p>Enables beta functionality, this is funcationality which is still under development and may not work in all instances. Currently a lot of the beta functionality is centered around real device support.</p>

<h4>-host</h4>
<p>IP of the node, this needs to be specified as guessing the correct IP can lead to problems - it's complicated by the host machine possibly having multiple addresses.</p>

<h4>-port</h4>
<p>Specify the port for ios-driver to run on, the default is 5555.</p>

<h4>-folder</h4>
<p>Absolute path of a folder to monitor for new applications.<br/>
    Acceptable file formats are *.ipa, *.app & *.zip.<br/>
    Any apps stored in the folder when ios-driver launches will be automatically added to the desired capabilities, real device archived apps will also be backed up to this location.<br/>
    The default location is [running folder]/applications</p>

<h4>-app, -aut</h4>
<p>Location of the application under test. Absolute path or URL expected.</p>    

<h4>-hub</h4>
<p>The registration url of your Selenium grid hub, for example: http://localhost:4444/grid/register. If specified ios-driver will register as a node on your grid. It does not include the nodes capabilities on registration as we also provide a custom remote proxy which polls the node looking for updated capabilities, see <a href='./scale.html'>Scale</a>  for more details.</p>

<h4>-proxy</h4>
<p>specify a custom remote proxy to use with ios-driver nodes, see <a href='./scale.html'>Scale</a>  for more details.</p>

<h4>-sessionTimeout</h4>
<p>Specify the maximum session timeout [seconds], the default is 1800 seconds [30 minutes].</p>


<h3>Configuring the system to support multiple SDK for the simulator</h3>
        doc todo.

<h3 id="real">Real Devices</h3>
<p>In order to run tests on real devices you need to enable beta functionality by specifying -beta when you launch ios-driver.</p>

<p>When you connect a device the server will output something like:</p>
<pre class="prettyprint">
    39:28:021 INFO DeviceStore.onDeviceAdded  ADDED : EC-SET-iPadMini1-01,IOS 6.0.2[4ad1d9688bbc1e69727bb5123daf477517982eae]
</pre>

<p>If you have deployed an application to the device which has had automation enabled  like <a href="#testapp">so</a>, you need to archive this application before it will be added to the ios-driver capabilities and therfore be testable. In order to archive the application, navigate to the ios-driver devices page http://localhost:5555/wd/hub/devices/all. Under the application name click on ARCHIVE.<br/>
<img src="images/realdevicearchive.png" alt="step2.png" width='640'> <br/>
Once you've archived the application you should now see it listed on http://localhost:5555/wd/hub/capabilities/all</p>

<pre class="prettyprint">
com.yourcompany.InternationalMountains on iphone
 
{ "BuildMachineOSBuild": "12D78", "CFBundleDevelopmentRegion": "en", "CFBundleExecutable": "InternationalMountains", "CFBundleIconFile": "Icon.png", "CFBundleIdentifier": "com.yourcompany.InternationalMountains", "CFBundleInfoDictionaryVersion": "6.0", "CFBundleName": "InternationalMountains", "CFBundlePackageType": "APPL", "CFBundleResourceSpecification": "ResourceRules.plist", "CFBundleSignature": "????", "CFBundleSupportedPlatforms": ["iPhoneOS"], "CFBundleVersion": "1.1", "DTCompiler": "", "DTPlatformBuild": "10B141", "DTPlatformName": "iphoneos", "DTPlatformVersion": "6.1", "DTSDKBuild": "10B141", "DTSDKName": "iphoneos6.1", "DTXcode": "0461", "DTXcodeBuild": "4H512", "LSRequiresIPhoneOS": true, "MinimumOSVersion": "6.0", "NSMainNibFile": "MainWindow", "UIDeviceFamily": [1], "applicationPath": "/Users/gabell/github/ios-driver-dev/applications/com.yourcompany.InternationalMountains.ipa.unzipped/payload/InternationalMountains.app", "device": "iphone", "deviceAlt": [ "iphone", "ipod" ], "sdkVersion": "6.0.2", "simulator": false, "supportedLanguages": [ "zh", "fr", "en" ], "timeHack": false, "uuid": "4ad1d9688bbc1e69727bb5123daf477517982eae", "variation": "Regular" }
 
 
com.apple.mobilesafari on iphone(Simulator)
 
{ "CFBundleDevelopmentRegion": "English", "CFBundleDisplayName": "Safari", "CFBundleExecutable": "MobileSafari", "CFBundleIcons": {"CFBundlePrimaryIcon": { "CFBundleIconFiles": [ "icon~iphone.png", "icon~ipad.png", "icon@2x~iphone.png", "icon@2x~ipad.png", "icon-table.png", "icon-table@2x.png", "icon-spotlight~ipad.png", "icon-spotlight@2x~ipad.png" ], "UIPrenderedIcon": true }}, "CFBundleIdentifier": "com.apple.mobilesafari", "CFBundleInfoDictionaryVersion": "6.0", "CFBundlePackageType": "APPL", "CFBundleShortVersionString": "6.0", "CFBundleSignature": "????", "CFBundleSupportedPlatforms": ["iPhoneSimulator"], "CFBundleURLTypes~ipad": [ { "CFBundleURLIsPrivate": true, "CFBundleURLName": "Web App URL", "CFBundleURLSchemes": ["webclip"] }, { "CFBundleURLName": "Web site URL", "CFBundleURLSchemes": [ "http", "https" ] }, { "CFBundleURLName": "FTP URL", "CFBundleURLSchemes": ["ftp"] }, { "CFBundleURLName": "Web Search URL", "CFBundleURLSchemes": ["x-web-search"] } ], "CFBundleURLTypes~iphone": [ { "CFBundleURLIsPrivate": true, "CFBundleURLName": "Web App URL", "CFBundleURLSchemes": ["webclip"] }, { "CFBundleURLName": "Web site URL", "CFBundleURLSchemes": [ "http", "https" ] }, { "CFBundleURLName": "Radar URL", "CFBundleURLSchemes": [ "rdar", "radar" ] }, { "CFBundleURLName": "FTP URL", "CFBundleURLSchemes": ["ftp"] }, { "CFBundleURLName": "Web Search URL", "CFBundleURLSchemes": ["x-web-search"] } ], "CFBundleURLTypes~ipod": [ { "CFBundleURLIsPrivate": true, "CFBundleURLName": "Web App URL", "CFBundleURLSchemes": ["webclip"] }, { "CFBundleURLName": "Web site URL", "CFBundleURLSchemes": [ "http", "https" ] }, { "CFBundleURLName": "Radar URL", "CFBundleURLSchemes": [ "rdar", "radar" ] }, { "CFBundleURLName": "FTP URL", "CFBundleURLSchemes": ["ftp"] }, { "CFBundleURLName": "Web Search URL", "CFBundleURLSchemes": ["x-web-search"] } ], "CFBundleVersion": "8536.25", "DTPlatformName": "iphonesimulator", "DTSDKName": "iphonesimulator6.1", "LSRequiresIPhoneOS": true, "SBMatchingApplicationGenres": [ "Productivity", "Utilities" ], "SBUsesNetwork": 3, "SafariProductVersion": "6.0", "UIApplicationDisableLegacyAutorotationKey": true, "UIBackgroundModes": [ "audio", "continuousFallback" ], "UIDeviceFamily": [ 2, 1 ], "UIHasPrefs": true, "UISupportedInterfaceOrientations": [ "UIInterfaceOrientationPortrait", "UIInterfaceOrientationLandscapeLeft", "UIInterfaceOrientationLandscapeRight" ], "UISupportedInterfaceOrientations~ipad": [ "UIInterfaceOrientationPortrait", "UIInterfaceOrientationLandscapeLeft", "UIInterfaceOrientationLandscapeRight", "UIInterfaceOrientationPortraitUpsideDown" ], "applicationPath": "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/Applications/MobileSafari.app", "device": "iphone", "deviceAlt": [ "ipad", "iphone", "ipod" ], "device_Alt": [ "iphone", "ipad" ], "sdkVersion": "6.1", "sdkVersion_Alt": [ "5.0", "5.1", "6.0", "6.1" ], "simulator": true, "supportedLanguages": [ "ko", "no", "cs", "pl", "el", "sv", "in_ID", "ja", "es", "pt_PT", "hu", "fi", "uk", "de", "ca", "ms", "pt", "ru", "en", "sk", "th", "en_GB", "zh_TW", "nl", "fr", "zh_CN", "tr", "it", "da", "iw_IL", "hr", "vi", "ar", "ro" ], "timeHack": false, "variation": "Regular" }
</pre>
<p>If you can see the application listed you're ready to start testing on a real device!</p>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">

</div>
</body>
</html>
